{% extends "base.html" %}
{% load bootstrap4 %}

{% block title %}
    Request
{% endblock title %}


{% block content %}
<div class="jumbotron">
  <h1 class="display-4">Request a Book Donation</h1>
  <p class="lead">Request the book you have been hankering for!</p>
  <hr class="my-4">
  <p>Just fill out the form below and with luck someone out there will be generous enough to contact you with their wish to donate your beloved book!</p>
</div>
<h3>Request your Book</h3>
<div class="card border rounded">
  <div class="card-body">
      <form method="POST">
          {% csrf_token %}
          {% bootstrap_form form %}
          <button class="btn btn-lg btn-primary btn-block">Submit</button>
      </form>
  </div>
</div>

<br>

<h3>Requested Donations</h3>
{% for donation_request in donation_requests %}



    <hr />
    {% if donation_request.cover_url %}
    <img src="{{ donation_request.cover_url }}" alt="Book icon" />
    {% else %}
    <img src="https://image.flaticon.com/icons/png/256/171/171322.png" alt="Book icon" />
    {% endif %}
    <h4>{{ donation_request.title }}</h4>
    <p><strong>Quantity:</strong> {{ donation_request.quantity }}</p>
    <p><strong>Info:</strong> {{ donation_request.info }}</p>
    <p>(id #: {{ donation_request.id }})</p>

<!-- This shows the creation date of the list, along with the avatar
and username of the creator -->
<div>
Submitted on {{ donation_request.created|date:"F jS Y" }} by
<a class="btn btn-link" href="/account/users/{{ donation_request.creator_user.username }}" >
    {{ donation_request.creator_user }}
    <img src="{{ donation_request.creator_user.gravatar }}" class="navbar-avatar" />
</a>


  {% if request.user == donation_request.creator_user %}
    <a href="/request-delete/{{ donation_request.id }}/" class="btn btn-outline-danger btn-sm">Delete this request</a>
  {% endif %}
</div>

{% endfor %}
{% endblock content %}


